# 宝塔面板Docker-Compose部署指南

## 部署前准备

1. 确保宝塔面板已安装Docker和Docker-Compose插件
2. 上传整个项目文件夹到宝塔面板

## 部署步骤

### 方法一：使用优化版本（推荐）

1. 将 `docker-compose-bt.yml` 重命名为 `docker-compose.yml`
2. 在宝塔面板Docker管理中选择"Compose部署"
3. 上传重命名后的docker-compose.yml文件
4. 点击部署

### 方法二：手动文件结构

如果方法一失败，请按照以下文件结构上传：

```
/www/server/panel/data/compose/vue-web/
├── docker-compose.yml
├── nginx.conf
├── backend/
│   ├── Dockerfile
│   ├── requirements.txt
│   └── ... (所有后端文件)
└── frontend/
    ├── Dockerfile
    ├── package.json
    └── ... (所有前端文件)
```

## 重要说明

- **端口分配**：
  - 80: nginx (主入口)
  - 8000: Django后端API
  - 5173: Vue.js前端
  - 5432: PostgreSQL
  - 6379: Redis

- **文件路径**：确保所有相对路径都正确，使用 `./` 开头的相对路径

- **访问地址**：
  - 主页: http://你的域名/
  - API: http://你的域名/api/
  - 前端开发服务器: http://你的域名:5173/

## 故障排除

如果遇到路径错误，请检查：
1. docker-compose.yml中的context路径是否正确
2. 所有Dockerfile是否在正确的目录中
3. 文件权限是否正确

## 部署后操作

1. 等待所有容器启动完成
2. 检查容器状态是否都为"运行中"
3. 访问网站确认功能正常